<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宁夏中卫美食推荐</title>
    <style>
        /* 基本样式 */
        .container {
            width: 80%;
            margin: 0 auto;
            text-align: center;
        }
        #map {
            width: 100%;
            height: 400px;
            margin-top: 20px;
        }
        .recommendation-list {
            margin-top: 20px;
            text-align: left;
        }
        .restaurant-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
    </style>
    <script src="https://api.map.baidu.com/api/api?v=2.0&ak=OJBGt2yi4vONc2bkAa82RrKlYE30ygMg"></script> <!-- 替换为您的百度地图API密钥 -->
    <script>
        let map;
        let markers = []; // 存储标记
        const foodData = [
            { name: '牛肉面', description: '好吃的牛肉面，味道鲜美', lat: 37.5090, lng: 105.1930, rating: 4.5, price: "25元" },
            { name: '羊肉串', description: '美味的羊肉串，香辣可口', lat: 37.5110, lng: 105.1810, rating: 4.7, price: "30元" },
            { name: '凉皮', description: '爽口的凉皮，适合夏天', lat: 37.5100, lng: 105.1820, rating: 4.2, price: "15元" },
            { name: '手抓羊肉', description: '正宗手抓羊肉，肉质鲜嫩', lat: 37.5120, lng: 105.1900, rating: 4.6, price: "50元" },
            { name: '炸糕', description: '酥脆可口的炸糕', lat: 37.5110, lng: 105.1810, rating: 4.1, price: "10元" }
        ];

        function initMap() {
            map = new BMap.Map("map");
            const centerPoint = new BMap.Point(105.1823, 37.5079);
            map.centerAndZoom(centerPoint, 12);
            map.enableScrollWheelZoom(true);
        }

        function showRecommendation() {
            const location = document.getElementById('location').value;
            const foodType = document.getElementById('food-type').value;

            // 这里模拟为固定数据，可以根据实际需求逻辑进行修改和扩展
            const filteredData = foodData.filter(food => food.name.includes(foodType));

            clearMarkers(); // 清除旧标记
            document.getElementById('recommendation').innerHTML = ''; // 清空推荐列表

            if (filteredData.length > 0) {
                filteredData.forEach((place, index) => {
                    const point = new BMap.Point(place.lng, place.lat);
                    const marker = new BMap.Marker(point);
                    map.addOverlay(marker);
                    const infoWindow = new BMap.InfoWindow(`<h4>${place.name}</h4><p>描述: ${place.description}<br>评分: ${place.rating}<br>参考价: ${place.price}</p>`);
                    marker.addEventListener("click", function() {
                        this.openInfoWindow(infoWindow);
                    });
                    markers.push(marker); // 存储标记

                    // 添加餐厅信息到推荐列表
                    const restaurantItem = document.createElement('div');
                    restaurantItem.classList.add('restaurant-item');
                    restaurantItem.innerHTML = `<strong>${index + 1}. ${place.name}</strong><br>评分: ${place.rating}<br>参考价: ${place.price}<br>描述: ${place.description}`;
                    document.getElementById('recommendation').appendChild(restaurantItem);
                });
                // 调整地图视野以适应所有标记
                map.setViewport(filteredData.map(food => new BMap.Point(food.lng, food.lat)));
            } else {
                alert("没有找到相关餐厅");
            }
        }

        function clearMarkers() {
            markers.forEach(marker => map.removeOverlay(marker));
            markers = [];
        }

        document.addEventListener('DOMContentLoaded', function() {
            initMap();
            document.getElementById('recommend-btn').onclick = showRecommendation;
        });
    </script>
</head>
<body>

<div class="container">
    <h1>宁夏中卫美食推荐</h1>

    <label for="location">输入您的位置:</label>
    <input type="text" id="location" placeholder="例如：中卫"/>

    <label for="food-type">输入您想吃的食物:</label>
    <input type="text" id="food-type" placeholder="例如：牛肉面"/>

    <button id="recommend-btn">获取推荐</button>

    <div class="recommendation-list" id="recommendation"></div>  

    <div id="map"></div>
</div>

</body>
</html>
